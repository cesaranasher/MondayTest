{"ast":null,"code":"import { ForbiddenError } from '../errors/apps-sdk-error.js';\nimport { isDefined } from '../types/guards.js';\nexport var isLocalEnvironment = function () {\n  return !isDefined(process.env.K_SERVICE);\n};\nexport var getMondayCodeContext = function () {\n  return {\n    app: process.env.K_SERVICE,\n    secureStorageAddress: process.env.SECURE_STORAGE_ADDRESS\n  };\n};\nexport var validateEnvironment = function () {\n  var _a = getMondayCodeContext(),\n      app = _a.app,\n      secureStorageAddress = _a.secureStorageAddress;\n\n  if (isLocalEnvironment()) {\n    throw new ForbiddenError('Secure storage not available on local env');\n  }\n\n  if (!isDefined(app)) {\n    throw new ForbiddenError('Missing environment variables for initialization [app name]');\n  }\n\n  if (!isDefined(secureStorageAddress)) {\n    throw new ForbiddenError('Missing environment variables for initialization [secure storage address]');\n  }\n};","map":{"version":3,"mappings":"AAAA,SAASA,cAAT,QAA+B,6BAA/B;AAEA,SAASC,SAAT,QAA0B,oBAA1B;AAEA,OAAO,IAAMC,kBAAkB,GAAG;EAAM,QAACD,SAAS,CAACE,OAAO,CAACC,GAAR,CAAYC,SAAb,CAAV;AAAiC,CAAlE;AAEP,OAAO,IAAMC,oBAAoB,GAAG;EAAyB,OAAC;IAC5DC,GAAG,EAAEJ,OAAO,CAACC,GAAR,CAAYC,SAD2C;IAE5DG,oBAAoB,EAAEL,OAAO,CAACC,GAAR,CAAYK;EAF0B,CAAD;AAG3D,CAHK;AAKP,OAAO,IAAMC,mBAAmB,GAAG;EAC3B,SAAgCJ,oBAAoB,EAApD;EAAA,IAAEC,GAAG,SAAL;EAAA,IAAOC,oBAAoB,0BAA3B;;EAEN,IAAIN,kBAAkB,EAAtB,EAA0B;IACxB,MAAM,IAAIF,cAAJ,CAAmB,2CAAnB,CAAN;EACD;;EAED,IAAI,CAACC,SAAS,CAACM,GAAD,CAAd,EAAqB;IACnB,MAAM,IAAIP,cAAJ,CAAmB,6DAAnB,CAAN;EACD;;EAED,IAAI,CAACC,SAAS,CAACO,oBAAD,CAAd,EAAsC;IACpC,MAAM,IAAIR,cAAJ,CAAmB,2EAAnB,CAAN;EACD;AACF,CAdM","names":["ForbiddenError","isDefined","isLocalEnvironment","process","env","K_SERVICE","getMondayCodeContext","app","secureStorageAddress","SECURE_STORAGE_ADDRESS","validateEnvironment"],"sources":["../../../lib/utils/env.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}